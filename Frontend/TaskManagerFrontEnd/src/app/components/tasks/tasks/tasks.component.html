<app-tabs (tabSelected)="onTabSelected($event)"></app-tabs>

<div *ngIf="taskTypeId != 0">
  <table class="table">
    <thead class="thead-dark">
      <tr> 
        <th scope="col"></th>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Description</th>
        <th scope="col">Creation Date</th>
        <th scope="col">Due Date</th>
        <th scope="col" *ngFor="let taskField of filteredTaskFields">{{ taskField.name }}</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let task of filteredTasks">
        <tr [ngClass]="{ 'completed': task.done }">
          <th>
            <input class="form-check-input" type="checkbox" [value]="task.id" [checked]="task.done"
              (change)="updateCheckedTasks($event, task.id)">
          </th>
          <th scope="row">{{ task.id }}</th>
          <td>{{ task.name }}</td>
          <td>{{ task.description }}</td>
          <td>{{ task.creationDate }}</td>
          <td>{{ task.dueDate }}</td>
          <td *ngFor="let taskField of filteredTaskFields"> 
            <ng-container *ngIf="hasFieldValue(task.id, taskField.id)">
              {{ getFieldValue(task.id, taskField.id) }}
            </ng-container>
          </td>
          <td>
            <button type="button" (click)="deleteTask($event, task.id)" class="btn btn-transparent custom-red-text">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
  <button type="button" (click)="openNewTaskForm()" class="btn btn-transparent add-task-button">
    <i class="fa fa-plus" aria-hidden="true"> Task</i>
  </button>
</div>
